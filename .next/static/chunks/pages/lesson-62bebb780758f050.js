(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{3808:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lesson",function(){return l(1533)}])},1533:function(e,n,l){"use strict";l.r(n);var t=l(5893),i=l(547),a=l(1163),s=l(7294),c=l(4430),o=l(5471),r=l(6546),u=l(1317);n.default=()=>{let[e,n]=(0,s.useState)(void 0),[l,d]=(0,s.useState)(!0),g=(0,a.useRouter)(),h=async()=>{try{let e=Number(u.x.get(u.j.LESSON_ID)),n=await (0,i.d7)(e);return n&&"challenges"in n&&(n.challenges=n.challenges.map(e=>({...e,question:e.question||"",challengeOptions:e.challengeOptions||[],type:e.type||""}))),n}catch(e){console.log(e),g.push("/learn");return}finally{d(!1)}};if((0,s.useEffect)(()=>{h().then(e=>{n(e)})},[]),l)return(0,t.jsx)("p",{children:"Loading..."});if(e&&e.type===r.LESSON_TYPE.FLASHCARD)return(0,t.jsx)(c.Z,{initFlashCards:e.challenges.map(e=>({id:e.id,word:e.question,meaning:e.challengeOptions.map(e=>e.option).join(", ")}))});let p=e?e.challenges.filter(e=>!0===e.completed).length/e.challenges.length*100:0;return e&&(0,t.jsx)(o.x,{initialLessonId:Number(e.id),initialLessonChallenges:e.challenges.map(e=>{var n,l;return{...e,id:Number(e.id),challengeId:Number(e.challengeId),completed:null!==(l=e.completed)&&void 0!==l&&l,text:e.question,correct:(null===(n=e.challengeOptions.find(e=>e.isCorrect))||void 0===n?void 0:n.option)||"",imageSrc:e.imageSrc||"",audioSrc:e.audioSrc||"",challengeOptions:e.challengeOptions.map(n=>({...n,challengeId:Number(e.challengeId),imageSrc:n.imageSrc||"",audioSrc:n.audioSrc||""}))}}),initialPercentage:p,isTest:e.type===r.LESSON_TYPE.TEST,isLesson:e.type===r.LESSON_TYPE.LESSON})}}},function(e){e.O(0,[365,503,675,275,610,471,546,888,774,179],function(){return e(e.s=3808)}),_N_E=e.O()}]);